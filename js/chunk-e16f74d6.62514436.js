(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e16f74d6"],{"1dde":function(t,e,o){var a=o("d039"),c=o("b622"),r=o("2d00"),s=c("species");t.exports=function(t){return r>=51||!a((function(){var e=[],o=e.constructor={};return o[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},8418:function(t,e,o){"use strict";var a=o("c04e"),c=o("9bf2"),r=o("5c6c");t.exports=function(t,e,o){var s=a(e);s in t?c.f(t,s,r(0,o)):t[s]=o}},"99af":function(t,e,o){"use strict";var a=o("23e7"),c=o("d039"),r=o("e8b5"),s=o("861d"),n=o("7b0b"),i=o("50c4"),l=o("8418"),d=o("65f0"),u=o("1dde"),p=o("b622"),b=o("2d00"),m=p("isConcatSpreadable"),f=9007199254740991,h="Maximum allowed index exceeded",O=b>=51||!c((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),j=u("concat"),g=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:r(t)},y=!O||!j;a({target:"Array",proto:!0,forced:y},{concat:function(t){var e,o,a,c,r,s=n(this),u=d(s,0),p=0;for(e=-1,a=arguments.length;e<a;e++)if(r=-1===e?s:arguments[e],g(r)){if(c=i(r.length),p+c>f)throw TypeError(h);for(o=0;o<c;o++,p++)o in r&&l(u,p,r[o])}else{if(p>=f)throw TypeError(h);l(u,p++,r)}return u.length=p,u}})},b7c8:function(t,e,o){"use strict";o.r(e);o("b64b");var a=o("7a23"),c={class:"container my-5"},r={class:"row"},s=Object(a["createVNode"])("div",{class:"col-9 mx-auto"},[Object(a["createVNode"])("section",{class:"position-relative mb-5 pb-5"},[Object(a["createVNode"])("div",{class:"progress",style:{height:"1px"}},[Object(a["createVNode"])("div",{class:"progress-bar",role:"progressbar",style:{width:"0%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),Object(a["createVNode"])("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}}),Object(a["createVNode"])("p",{class:"position-absolute top-0 start-0 translate-middle mt-4 pt-2"},"確認商品"),Object(a["createVNode"])("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle\n                btn btn-secondary rounded-pill",style:{width:"2rem",height:"2rem"}}),Object(a["createVNode"])("p",{class:"position-absolute top-0 start-50 translate-middle mt-4 pt-2"},"填寫資料"),Object(a["createVNode"])("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle\n              btn btn-secondary rounded-pill",style:{width:"2rem",height:"2rem"}}),Object(a["createVNode"])("p",{class:"position-absolute top-0 start-100 translate-middle text-nowrap mt-4\n            pt-2"}," 結賬 ")])],-1),n={class:"col-lg-9 mx-auto"},i={key:0},l=Object(a["createVNode"])("h2",{class:"text-center fw-bolder mb-3 mb-md-4 mb-lg-5"},"購物車列表",-1),d={class:"list-group "},u={class:"d-flex align-items-center"},p={class:"ms-auto"},b={class:"mb-0"},m={class:"mb-0"},f={class:"input-group"},h={class:"list-group-item py-3 "},O={class:"d-flex "},j={class:"ms-auto"},g={class:"mb-0 d-flex"},y=Object(a["createTextVNode"])(" 商品合計： "),V={class:"ms-auto"},v={class:"mb-0 d-flex"},N=Object(a["createTextVNode"])(" 訂單總計： "),w={class:"ms-auto text-danger"},x={class:"input-group w-50 ms-auto mb-3 "},C=Object(a["createTextVNode"])("填寫資料");function k(t,e,o,k,$,D){var T=Object(a["resolveComponent"])("Loading"),L=Object(a["resolveComponent"])("router-link"),S=Object(a["resolveComponent"])("Field"),_=Object(a["resolveComponent"])("Form"),B=Object(a["resolveComponent"])("toast");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(T,{active:t.isLoading.status},null,8,["active"]),Object(a["createVNode"])("div",c,[Object(a["createVNode"])("div",r,[s,Object(a["createVNode"])("div",n,[$.cartsData.carts[0]?(Object(a["openBlock"])(),Object(a["createBlock"])("section",i,[l,Object(a["createVNode"])("ul",d,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])($.cartsData.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{class:"list-group-item py-3",key:e.id},[Object(a["createVNode"])("div",u,[Object(a["createVNode"])("input",{type:"button",value:"X",class:"btn btn-link btn-sm text-decoration-none link-secondary me-2",onClick:function(t){return D.deleteCart(e)}},null,8,["onClick"]),Object(a["createVNode"])(L,{to:"/product/".concat(e.product.id),class:"link-dark"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("img",{src:e.product.imageUrl,alt:e.title,class:"studio__checkout__img rounded me-3"},null,8,["src","alt"])]})),_:2},1032,["to"]),Object(a["createVNode"])("div",p,[Object(a["createVNode"])(L,{to:"/product/".concat(e.product.id),class:"link-dark"},{default:Object(a["withCtx"])((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.product.title),1)]})),_:2},1032,["to"]),Object(a["createVNode"])("p",b," 單價："+Object(a["toDisplayString"])("$ "+t.$filters.currency(e.product.price))+" x "+Object(a["toDisplayString"])(e.qty)+" "+Object(a["toDisplayString"])(e.product.unit),1),Object(a["createVNode"])("p",m,"小計："+Object(a["toDisplayString"])("$ "+t.$filters.currency(e.total)),1),Object(a["createVNode"])("div",f,[Object(a["createVNode"])("button",{class:"btn btn-outline-primary border-secondary",type:"button",onClick:function(t){return D.putCart(e,e.qty-1)},disabled:e.qty-1===0}," - ",8,["onClick","disabled"]),Object(a["createVNode"])("input",{type:"text",class:"form-control text-center bg-white",placeholder:"",value:e.qty,disabled:""},null,8,["value"]),Object(a["createVNode"])("button",{class:"btn btn-outline-primary border-secondary",type:"button",onClick:function(t){return D.putCart(e,e.qty+1)}}," + ",8,["onClick"])])])])])})),128)),Object(a["createVNode"])("li",h,[Object(a["createVNode"])("div",O,[Object(a["createVNode"])("div",j,[Object(a["createVNode"])("p",g,[y,Object(a["createVNode"])("span",V,Object(a["toDisplayString"])("TWD$ "+t.$filters.currency($.cartsData.total)),1)]),Object(a["createVNode"])("p",v,[N,Object(a["createVNode"])("span",w,Object(a["toDisplayString"])("TWD$ "+t.$filters.currency(Math.floor($.cartsData.final_total))),1)]),Object(a["createVNode"])("p",null,Object(a["toDisplayString"])($.percent),1)])]),Object(a["createVNode"])(_,{action:"",ref:"couponForm",onSubmit:D.postCoupon},{default:Object(a["withCtx"])((function(t){var o=t.errors;return[Object(a["createVNode"])("div",x,[Object(a["createVNode"])(S,{id:"userEmail",name:"優惠券",type:"text",class:"form-control ",placeholder:"請輸入優惠券代碼",rules:"min:5",modelValue:$.couponCode,"onUpdate:modelValue":e[1]||(e[1]=function(t){return $.couponCode=t})},null,8,["modelValue"]),Object(a["createVNode"])("input",{class:"btn btn-primary text-white",value:"套用123",type:"submit",disabled:0!==Object.keys(o).length||""===$.couponCode},null,8,["disabled"])])]})),_:1},8,["onSubmit"]),Object(a["createVNode"])(L,{to:"/CheckoutInfo",class:"btn btn-primary text-white w-100"},{default:Object(a["withCtx"])((function(){return[C]})),_:1})])])])):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createVNode"])(B,{ref:"toast"},null,512)])}o("99af"),o("ac1f"),o("5319");var $={data:function(){return{cartsData:{carts:[]},couponCode:"",percent:0}},emits:["update"],props:["cartsUpdate"],methods:{getCartsList:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("item666","/cart");this.isLoading.status=!0,this.axios.get(e).then((function(e){e.data.success?(t.cartsData=e.data.data,t.cartsData.carts.length||t.isSubmitOrder||t.$router.replace("/productsList"),t.cartsData.carts[0]&&(t.percent=t.cartsData.carts[0].coupon?"已打 ".concat(t.cartsData.carts[0].coupon.percent," 折"):"未使用優惠券"),t.isLoading.status=!1):t.$refs.toast.showToast(e.data.message,"error")})).catch((function(){t.$refs.toast.showToast("取得購物車清單有問題喔!","error")}))},putCart:function(t,e){var o=this,a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("item666","/cart/").concat(t.id),c={data:{product_id:t.product_id,qty:e}};this.axios.put(a,c).then((function(a){a.data.success?(o.$emit("update"),o.getCartsList(),t.qty<e?o.$refs.toast.showToast("已增加『".concat(t.product.title,"』數量囉!")):o.$refs.toast.showToast("已減少『".concat(t.product.title,"』數量囉!"),"error")):o.$refs.toast.showToast(a.data.message,"error")})).catch((function(){o.$refs.toast.showToast("無法更新資料喔!","error")}))},deleteCart:function(t){var e=this,o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("item666","/cart/").concat(t.id);this.isLoading.itemID=t.id,this.axios.delete(o).then((function(o){o.data.success?(e.$emit("update"),e.getCartsList(),e.$refs.toast.showToast("已從購物車刪除『".concat(t.product.title,"』囉!"),"error"),e.isLoading.itemID=""):e.$refs.toast.showToast(o.data.message)})).catch((function(){e.$refs.toast.showToast("無法刪除購物車內商品喔!","error")}))},postCoupon:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("item666","/coupon");this.axios.post(e,{data:{code:this.couponCode}}).then((function(e){e.data.success?(t.$refs.toast.showToast(e.data.message),t.$refs.couponForm.resetForm(),t.getCartsList()):t.$refs.toast.showToast(e.data.message,"error")})).catch((function(){t.$refs.toast.showToast("無法套用優惠券喔!","error")}))}},created:function(){this.getCartsList()},watch:{cartsUpdate:function(t){t&&this.getCartsList()}}};$.render=k;e["default"]=$}}]);
//# sourceMappingURL=chunk-e16f74d6.62514436.js.map