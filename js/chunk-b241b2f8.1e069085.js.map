{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/backend/Orders.vue","webpack:///./src/components/backendModal/OrderModal.vue","webpack:///./src/components/backendModal/OrderModal.vue?bebe","webpack:///./src/views/backend/Orders.vue?a0d8"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","class","width","role","aria-hidden","active","isLoading","status","pages","totalPages","currentPage","getOrders","getFilterData","filterData","item","key","id","is_paid","user","name","email","tel","address","products","productItem","product","title","total","type","checked","putOrder","for","itemID","value","openEditModal","openDeleteModal","ref","data","tempOrder","tab","deleteOrder","data-bs-backdrop","data-bs-keyboard","tabindex","data-bs-dismiss","aria-label","action","errors","Date","order","create_at","toLocaleString","qty","unit","Math","floor","final_total","percent","message","rules","editTotal","modal","emits","props","methods","$emit","hideModal","showModal","show","hide","getPercent","firstProduct","Object","keys","coupon","mounted","$refs","orderModal","watch","render","orders","searchData","page","apiUrl","axios","then","res","success","pagination","total_pages","current_page","swal","catch","orderObj","put","delete","deleteModal","JSON","parse","stringify","components","OrderModal","DelModal","computed","filter","created"],"mappings":"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","file":"js/chunk-b241b2f8.1e069085.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\n  <div>\n    <Loading :active=\"isLoading.status\"></Loading>\n    <div class=\"sticky-top bg-white ps-2 py-3 mb-1\">\n      <h2 class=\"h3\">訂單列表</h2>\n      <div class=\"d-flex\">\n        <Page\n          :pages=\"totalPages\"\n          :currentPage=\"currentPage\"\n          @display-page=\"getOrders\"\n          class=\"me-2\"\n        ></Page>\n        <Search @filter-data=\"getFilterData\"></Search>\n      </div>\n    </div>\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th width=\"100\" class=\"text-center border-secondary\">訂購人</th>\n          <th class=\"border-secondary\">聯絡信箱</th>\n          <th class=\"border-secondary\">連絡電話</th>\n          <th class=\"border-secondary\">住址</th>\n          <th class=\"border-secondary\">商品</th>\n          <th class=\"text-end border-secondary\">總金額</th>\n          <th width=\"200\" class=\"border-secondary\">付款狀態</th>\n          <th class=\"border-secondary\">操作</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in filterData\" :key=\"item.id\" :class=\"{ 'table-primary': item.is_paid }\">\n          <td class=\"text-center\">{{ item.user.name }}</td>\n          <td>{{ item.user.email }}</td>\n          <td>{{ item.user.tel }}</td>\n          <td>{{ item.user.address }}</td>\n          <td>\n            <p v-for=\"productItem in item.products\" :key=\"productItem.product.id\" class=\"mb-0\">\n              {{ productItem.product.title }}\n            </p>\n          </td>\n          <td class=\"text-end\">{{ item.total }}</td>\n          <td>\n            <div class=\"form-check form-switch\">\n              <input\n                class=\"form-check-input\"\n                type=\"checkbox\"\n                :id=\"item.id\"\n                :checked=\"item.is_paid\"\n                @change=\"putOrder(item, 'isPaid')\"\n              />\n              <label class=\"form-check-label\" :for=\"item.id\">\n                {{ item.is_paid ? '已付款' : '未付款' }}\n                <span\n                  class=\"spinner-border spinner-border-sm me-2\"\n                  role=\"status\"\n                  aria-hidden=\"true\"\n                  v-if=\"isLoading.itemID === item.id\"\n                ></span>\n              </label>\n            </div>\n          </td>\n          <td>\n            <div class=\"btn-group\">\n              <!-- 可以修改金額與付款狀態 -->\n              <input\n                type=\"button\"\n                value=\"修改\"\n                class=\"btn btn-outline-dark border-secondary\"\n                :class=\"{ disabled: item.is_paid }\"\n                @click=\"openEditModal(item)\"\n              />\n              <input\n                type=\"button\"\n                value=\"刪除\"\n                class=\"btn btn-outline-danger border-secondary\"\n                :class=\"{ disabled: !item.is_paid }\"\n                @click=\"openDeleteModal(item)\"\n              />\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <OrderModal ref=\"orderModal\" :data=\"tempOrder\" @edit-total=\"putOrder\"></OrderModal>\n    <DelModal ref=\"deleteModal\" :title=\"tempOrder.user.name\" tab=\"訂單\" @delete-data=\"deleteOrder\">\n    </DelModal>\n  </div>\n</template>\n\n<script>\nimport OrderModal from '@/components/backendModal/OrderModal.vue';\nimport DelModal from '@/components/backendModal/DeleteModal.vue';\n\nexport default {\n  data() {\n    return {\n      orders: [],\n      tempOrder: {\n        user: {},\n      },\n      currentPage: 1,\n      totalPages: 0,\n      searchData: '',\n    };\n  },\n  methods: {\n    // 預設值與變數連動，當值從元件傳出時就會跟著變化，若不設定預設值，只會從變數取得數值\n    // 效果，當更新付款時，畫面刷新分頁不會跳回第一頁\n    getOrders(page = this.currentPage) {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`;\n      this.isLoading.status = true;\n      this.axios\n        .get(apiUrl)\n        .then((res) => {\n          if (res.data.success) {\n            this.orders = res.data.orders;\n            this.totalPages = res.data.pagination.total_pages;\n            this.currentPage = res.data.pagination.current_page;\n            this.isLoading.status = false;\n          } else {\n            this.swal(res.data.message, 'error');\n          }\n        })\n        .catch(() => {\n          this.swal('無法取得資料喔～快去看什麼問題吧！', 'error');\n        });\n    },\n    getFilterData(data) {\n      this.searchData = data;\n    },\n    putOrder(item, action) {\n      const orderObj = { data: { ...item } };\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${orderObj.data.id}`;\n      this.isLoading.itemID = item.id;\n      if (action === 'isPaid') {\n        orderObj.data.is_paid = !orderObj.data.is_paid;\n      }\n      this.axios\n        .put(apiUrl, orderObj)\n        .then((res) => {\n          if (res.data.success) {\n            this.swal(res.data.message);\n            this.getOrders();\n            this.isLoading.itemID = '';\n          } else {\n            this.swal(res.data.message, 'error');\n          }\n        })\n        .catch(() => {\n          this.swal('無法修改資料喔～快去看什麼問題吧！', 'error');\n        });\n    },\n    deleteOrder() {\n      const apiUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`;\n      this.isLoading.itemID = this.tempOrder.id;\n      this.axios\n        .delete(apiUrl)\n        .then((res) => {\n          if (res.data.success) {\n            this.$refs.deleteModal.hideModal();\n            this.getOrders();\n            this.swal(res.data.message);\n            this.isLoading.itemID = '';\n          } else {\n            this.swal(res.data.message, 'error');\n          }\n        })\n        .catch(() => {\n          this.swal('無法刪除資料喔～快去看什麼問題吧！', 'error');\n        });\n    },\n    openDeleteModal(item) {\n      this.tempOrder = { ...item };\n      this.$refs.deleteModal.showModal();\n    },\n    openEditModal(item) {\n      this.tempOrder = JSON.parse(JSON.stringify(item));\n      this.$refs.orderModal.showModal();\n    },\n  },\n  components: {\n    OrderModal,\n    DelModal,\n  },\n  computed: {\n    filterData() {\n      return this.orders.filter((item) => item.user.name.match(this.searchData));\n    },\n  },\n  created() {\n    this.getOrders();\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    ref=\"orderModal\"\n    data-bs-backdrop=\"static\"\n    data-bs-keyboard=\"false\"\n    tabindex=\"-1\"\n  >\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <p class=\"modal-title h5\">修改訂單</p>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <Form action=\"\" v-slot=\"{ errors }\" ref=\"orderForm\">\n          <div class=\"modal-body\">\n            <table class=\"table table-bordered border-secondary\">\n              <tbody>\n                <tr>\n                  <th>訂購時間</th>\n                  <td>{{ new Date(order.create_at * 1000).toLocaleString() }}</td>\n                </tr>\n                <tr>\n                  <th>訂購 ID</th>\n                  <td>{{ order.id }}</td>\n                </tr>\n                <tr>\n                  <th>訂購人</th>\n                  <td>{{ order.user.name }}</td>\n                </tr>\n                <tr>\n                  <th>聯絡信箱</th>\n                  <td>{{ order.user.email }}</td>\n                </tr>\n                <tr>\n                  <th>聯絡電話</th>\n                  <td>{{ order.user.tel }}</td>\n                </tr>\n                <tr>\n                  <th>地址</th>\n                  <td>{{ order.user.address }}</td>\n                </tr>\n                <tr>\n                  <th>商品清單</th>\n                  <td>\n                    <p class=\"d-flex mb-0\" v-for=\"item in order.products\" :key=\"item.product.id\">\n                      {{ item.product.title }} x {{ item.qty }} {{ item.product.unit }}=\n                      <span class=\"ms-auto\">${{ Math.floor(item.final_total) }}</span>\n                    </p>\n                    <p class=\"text-end mb-0 border-top pt-1\">\n                      合計 : ${{ Math.floor(order.total) }}\n                    </p>\n                  </td>\n                </tr>\n                <tr>\n                  <th>折價券</th>\n                  <td>{{ percent }}折</td>\n                </tr>\n                <tr>\n                  <th>備註</th>\n                  <td>{{ order.message }}</td>\n                </tr>\n                <tr>\n                  <th>付款狀態</th>\n                  <td>{{ order.is_paid ? '已付款' : '未付款' }}</td>\n                </tr>\n              </tbody>\n            </table>\n            <div class=\"col\">\n              <label for=\"editTotal\" class=\"form-label\"\n                >修改金額\n                <span class=\"text-danger\">*</span>\n              </label>\n              <Field\n                id=\"editTotal\"\n                name=\"修改金額\"\n                type=\"number\"\n                class=\"form-control\"\n                :class=\"{ 'is-invalid': errors['修改金額'] }\"\n                rules=\"min_value:0\"\n                v-model=\"order.total\"\n              ></Field>\n              <error-message name=\"修改金額\" class=\"invalid-feedback\"></error-message>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"editTotal\">\n              修改\n            </button>\n          </div>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal';\n\nexport default {\n  data() {\n    return {\n      modal: {},\n      order: {\n        user: {},\n      },\n      percent: 0,\n    };\n  },\n  emits: ['editTotal'],\n  props: ['data'],\n  methods: {\n    editTotal() {\n      this.$emit('editTotal', this.order);\n      this.hideModal();\n    },\n    showModal() {\n      this.modal.show();\n    },\n    hideModal() {\n      this.modal.hide();\n    },\n    getPercent() {\n      const firstProduct = Object.keys(this.order.products)[0];\n      this.percent = this.order.products[firstProduct].coupon\n        ? `${this.order.products[firstProduct].coupon.percent} `\n        : '未打';\n    },\n  },\n  mounted() {\n    this.modal = new Modal(this.$refs.orderModal);\n  },\n  watch: {\n    data(value) {\n      this.order = value;\n      this.getPercent();\n    },\n  },\n};\n</script>\n","import { render } from \"./OrderModal.vue?vue&type=template&id=fb16b37e\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Orders.vue?vue&type=template&id=2c7c26ee\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}